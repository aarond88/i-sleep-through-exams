<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <title>Weather status</title>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-130211160-1', 'auto');
      ga('send', 'pageview');
    </script>

    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-130211160-1');
    </script>


    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/public/app/main.css">
    <!-- Angular Libraries -->
    <link async rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.10/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.10/angular-animate.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.10/angular-aria.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.10/angular-messages.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.10/angular-route.js""></script>



    <!-- Angular Material-->
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.10/angular-material.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.10/angular-material.min.js"></script>

    <script src="/public/components/event/controller.js"></script>

    <script src="/public/components/register/controller.js"></script>
    <script src="/public/app/services.js"></script>
    <script src="/public/app/main.js"></script>
  </head>
  <header>
    <md-toolbar class="md-tall">
      <div layout="row" layout-align="begin end">
        <img src="/public/assets/logo.png" class="logo" id="logo" />
        <h2 style="vertical-align:middle">Weather status</h2>
      </div>
      <div>
        <p>{{errormessage}}</p>
        <p id="demo">Test text</p>
      </div>
    </md-toolbar>

  </header>

  <body ng-app="EventApp" ng-controller="MainCtrl as ctrl" ng-cloak background="/public/assets/bgimage.png">
    <div ng-view></div>


	<h2 style="text-align: center;">&nbsp;</h2>
	<h2 style="text-align: center;">&nbsp;</h2>
	<h2 id="weather-title" style="text-align: center;">Current weather in &lt;New Haven&gt;, US</h2>
	<table style="height: 177px; margin-left: auto; margin-right: auto;" width="446">
	   <tbody>
	      <tr style="height: 7.85001px;">
	         <td style="width: 213.6px; height: 7.85001px;">
	            <h1><span id="main-temp" style="color: #333333;">25* F</span></h1>
	            <p><span id="weather-desc" temp" style="color: #333333;">Clear</span></p>
	         </td>
	         <td style="width: 217.6px; height: 7.85001px;">
	            <p><span id="main-max-min" style="color: #333333;">High-Low : 27*-21* F&nbsp;</span></p>
	            <p><span id="main-humidity" style="color: #333333;">Humidity: 50%</span></p>
	            <p><span id="wind-speed" style="color: #333333;">Wind: 5mph</span></p>
	         </td>
	      </tr>
	   </tbody>
	</table>

  </body>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<script>
	   var x = document.getElementById("demo");
	   var weatherTitle = document.getElementById("weather-title");
	   var mainTemp = document.getElementById("main-temp");
	   var weatherDesc = document.getElementById("weather-desc");
	   var MainMaxMin = document.getElementById("main-max-min");
	   var mainHumidity = document.getElementById("main-humidity");
	   var windSpeed = document.getElementById("wind-speed");
	   
	   function getLocation() {
	     if (navigator.geolocation) {
	       navigator.geolocation.getCurrentPosition(showPosition);
	     } else { 
	       x.innerHTML = "Geolocation is not supported by this browser.";
	     }
	   }
	   
	   function showPosition(position) {
	     $.getJSON("https://api.openweathermap.org/data/2.5/weather?lat=" + position.coords.latitude + "&lon=" + position.coords.longitude + "&appid=edd1482d5f76f72226714348ab519fc0", function(result){
            x.innerHTML = result + " " + position.coords.latitude;
        	weatherTitle.innerHTML = "Current weather in " + result['name'] + ", " + result['sys']['country'];
        	mainTemp.innerHTML = Math.round(((result['main']['temp'] - 273.15) * 9/5 + 32)).toString() + "&#176; F"
        	weatherDesc.innerHTML = "";
        	MainMaxMin.innerHTML = "";
        	mainHumidity.innerHTML = "";
        	windSpeed.innerHTML = "";
        	
        });	     
	     //x.innerHTML = "Latitude: " + position.coords.latitude + 
	     //"<br>Longitude: " + position.coords.longitude;
	   }
	   
	   window.onload = function() {
	     getLocation();
	   };
	</script>
  <footer>
  </footer>
</html>